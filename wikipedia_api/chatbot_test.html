<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chatbot Test (Local)</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; margin: 40px; }
    .row { display: flex; gap: 8px; margin-bottom: 12px; }
    input, button { padding: 10px; font-size: 16px; }
    input { flex: 1; }
    #reply { white-space: pre-wrap; border: 1px solid #ddd; padding: 12px; border-radius: 8px; min-height: 80px; }
    .hint { color: #666; font-size: 14px; margin-bottom: 16px; }
  </style>
  <script>
    async function sendMessage() {
      const base = document.getElementById('apiBase').value.trim() || 'http://localhost:8000';
      const msg = document.getElementById('message').value.trim();
      if (!msg) return;
      const btn = document.getElementById('sendBtn');
      const reply = document.getElementById('reply');
      btn.disabled = true; btn.textContent = 'Sending...';
      reply.textContent = '...';
      try {
        const res = await fetch(`${base}/chat`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: msg })
        });
        const data = await res.json();
        if (!res.ok) throw new Error(JSON.stringify(data));
        reply.textContent = data.reply || JSON.stringify(data, null, 2);
      } catch (e) {
        reply.textContent = `Error: ${e}`;
      } finally {
        btn.disabled = false; btn.textContent = 'Send';
      }
    }
  </script>
  
  
</head>
<body>
  <h1>Chatbot Test (Local)</h1>
  <div class="hint">Ensure the API is running at http://localhost:8000. Health: <a href="http://localhost:8000/healthz" target="_blank" rel="noopener">/healthz</a></div>
  <div class="row">
    <input id="apiBase" placeholder="API base (default: http://localhost:8000)" />
  </div>
  <div class="row">
    <input id="message" placeholder="Type a message or try: wiki Alan Turing" />
    <button id="sendBtn" onclick="sendMessage()">Send</button>
  </div>
  <div id="reply"></div>
</body>
</html>


